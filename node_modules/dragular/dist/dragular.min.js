!function(e,n){if("object"==typeof exports&&"object"==typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var r=n();for(var t in r)("object"==typeof exports?exports:e)[t]=r[t]}}(this,function(){return function(e){function n(t){if(r[t])return r[t].exports;var o=r[t]={exports:{},id:t,loaded:!1};return e[t].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var r={};return n.m=e,n.c=r,n.p="",n(0)}([function(e,n,r){"use strict";var t=r(1),o=r(2);e.exports="dragularModule",angular.module("dragularModule",[]).factory("dragularService",o).directive("dragular",t)},function(e,n){"use strict";var r=function(e){return{restrict:"A",link:function(n,r,t){function o(e){try{return JSON.parse(e)}catch(n){return}}var i=n.$eval(t.dragular)||o(t.dragular)||{};t.dragularModel&&(i.containersModel=t.dragularModel,i.scope||(i.scope=n)),t.dragularNameSpace&&(i.nameSpace=t.dragularNameSpace.split(" ")),t.dragularOnInit&&(i.onInit=n.$eval(t.dragularOnInit)),e(r[0],i)}}};r.$inject=["dragularService"],e.exports=r},function(e,n){"use strict";var r={classesCache:{},containersCtx:{},containers:{},mirror:null,source:null,item:null,copy:null,sourceItem:null,sourceModel:null,sourceFilteredModel:null,target:null,targetCtx:null,targetModel:null,lastDropTarget:null,offsetX:null,offsetY:null,moveX:null,moveY:null,offsetXr:null,offsetYb:null,clientX:null,clientY:null,mirrorWidth:null,mirrorHeight:null,initialSibling:null,currentSibling:null,initialIndex:null,currentIndex:null,tempModel:null,dragOverEvents:{},lastElementBehindCursor:null,grabbed:null},t=function(e,n){function t(t,d){function x(){1!==arguments.length||w(t)||angular.isElement(t)||t[0]||"string"==typeof t?"string"==typeof t&&(ge=document.querySelectorAll(t)):(fe=t||{},ge=[]),me=fe.copyOptions?angular.copy(fe):fe}function b(){var e=angular.extend({},xe,me);angular.extend(me,e),me.classes&&(e=angular.extend({},ve,me.classes),angular.extend(me.classes,e)),me.eventNames&&(e=angular.extend({},he,me.eventNames),angular.extend(me.eventNames,e))}function N(){h(me.boundingBox)||(me.boundingBox=!1),me.containers&&(ge=me.containers),me.containers=o(ge,!1,me.scope),me.containersModel=o(me.containersModel,!0,me.scope),w(me.containersFilteredModel)?me.containersFilteredModel=w(me.containersFilteredModel[0])?me.containersFilteredModel:[me.containersFilteredModel]:me.containersFilteredModel=[],me.nameSpace||(me.nameSpace=["dragularCommon"]),w(me.nameSpace)||(me.nameSpace=[me.nameSpace]),me.nameSpace.forEach(function(e){r.containers[e]||(r.containers[e]=[],r.containersCtx[e]=[]);for(var n,t=_(me).length,o=0;o<t;o++){if(n=_(me)[o],!n)throw new Error("Container element must be defined!");if(r.containers[e].indexOf(n)!==-1)throw new Error("Cannot register container element more than once! Container element: ");r.containers[e].push(n),r.containersCtx[e].push({o:me,m:ee(me)[o],fm:me.containersFilteredModel[o]})}})}function $(e){var n=e?"off":"on";i(T,n,"mouseup",te),_(me).forEach(function(e){i(e,"on","mousedown",A)}),e||angular.forEach(["dragularenter","dragularleave","dragularrelease"],function(e){var n=me.eventNames[e];r.dragOverEvents[n]||(O.createEvent?(r.dragOverEvents[n]=O.createEvent("HTMLEvents"),r.dragOverEvents[n].initEvent(n,!0,!0)):(r.dragOverEvents[n]=O.createEventObject(),r.dragOverEvents[n].eventType=n))})}function A(e){if(1===u(e)&&!e.metaKey&&!e.ctrlKey){r.moveX=e.clientX,r.moveY=e.clientY;var n=j(e.target);n&&n.item&&(r.grabbed=n,D(),"mousedown"===e.type&&(S(e.target)?e.target.focus():e.preventDefault()))}}function D(e){var n=e?"off":"on";i(T,n,"mousemove",F)}function F(e){if(r.grabbed&&!ye.dragging){if(e.originalEvent&&(e=e.originalEvent),0===u(e))return void te({});if(!e.clientX||e.clientX!==r.moveX||!e.clientY||e.clientY!==r.moveY){if(pe(me.ignoreInputTextSelection)){var n=E("clientX",e),t=E("clientY",e),o=O.elementFromPoint(n,t);if(S(o))return}var i=r.grabbed;if(D("remove"),H(),R(),L(i),r.item){if(!me.direction&&C(r.sourceItem)){var a=r.sourceItem.parentNode,l=a.offsetHeight,c=a.offsetWidth,s=r.sourceItem.clientHeight,d=r.sourceItem.clientWidth;me.direction=l/s<c/d?"horizontal":"vertical"}var g=m(r.sourceItem);r.offsetX=E("pageX",e)-g.left,r.offsetY=E("pageY",e)-g.top,r.clientX=E("clientX",e),r.clientY=E("clientY",e),me.boundingBox&&(r.offsetXr=E("pageX",e)-g.right,r.offsetYb=E("pageY",e)-g.bottom),e.preventDefault(),k(),y(r.item,me.classes.transit),r.mirror.style.left=r.clientX-r.offsetX+"px",r.mirror.style.top=r.clientY-r.offsetY+"px",z(e)}}}}function H(e){var n=e?"off":"on";i(T,n,"selectstart",s),i(T,n,"click",s),i(T,n,"touchmove",s)}function j(e){if(!ye.dragging||!r.mirror){for(var n=e;C(e)&&!Z(C(e));){if(me.invalid(e,n))return;if(e=C(e),!e)return}var t=C(e);if(t&&!me.invalid(e,n)&&me.moves(e,t,n,v(e)))return{item:e,source:t}}}function L(e){r.sourceItem=r.item=e.item,r.source=e.source,r.initialSibling=r.currentSibling=v(e.item),pe(me.copy,[e.item,e.source])?(r.item=e.item.cloneNode(!0),r.copy=!0,me.scope&&me.scope.$emit(me.eventNames.dragularcloned,r.item,e.item)):r.copy=!1;var n=_(me).indexOf(e.source);return r.sourceModel=ee(me)[n],r.sourceFilteredModel=me.containersFilteredModel[n],r.initialIndex=I(e.item,e.source),ye.dragging=!0,me.scope&&me.scope.$emit(me.eventNames.dragulardrag,r.sourceItem,r.source),!0}function P(e){var n=j(e);n&&(r.grabbed=n,D())}function k(){if(!r.mirror){var e=r.sourceItem.getBoundingClientRect();r.mirror=r.sourceItem.cloneNode(!0),r.mirrorWidth=e.width,r.mirrorHeight=e.height,r.mirror.style.width=g(e)+"px",r.mirror.style.height=f(e)+"px",y(r.mirror,me.classes.mirror),me.mirrorContainer.appendChild(r.mirror),i(T,"on","mousemove",z),y(O.body,me.classes.unselectable),i(r.mirror,"on","wheel",ue),me.scope&&me.scope.$emit(me.eventNames.dragularcloned,r.mirror,r.sourceItem)}}function R(){ye.dragging&&r.item&&oe(r.item,C(r.item))}function W(){r.grabbed=!1,D("remove"),H("remove")}function z(e){function n(n){me.scope&&me.scope.$emit(me.eventNames["dragular"+n],r.item,r.lastDropTarget,r.source,e),pe(me.removeOnSpill)===!0&&("over"===n?U():q())}if(r.mirror){e.originalEvent&&(e=e.originalEvent),r.clientX=E("clientX",e),r.clientY=E("clientY",e);var t,o,i,a=r.clientX-r.offsetX,l=r.clientY-r.offsetY;me.boundingBox&&(t=E("pageX",e),o=E("pageY",e),i=m(me.boundingBox)),me.lockY||(!me.boundingBox||t>i.left+r.offsetX&&t<i.right+r.offsetXr?r.mirror.style.left=a+"px":me.boundingBox&&(t<i.left+r.offsetX?r.mirror.style.left=r.clientX-(t-i.left)+"px":r.mirror.style.left=r.clientX-r.mirrorWidth-(t-i.right)+"px")),me.lockX||(!me.boundingBox||o>i.top+r.offsetY&&o<i.bottom+r.offsetYb?r.mirror.style.top=l+"px":me.boundingBox&&(o<i.top+r.offsetY?r.mirror.style.top=r.clientY-(o-i.top)+"px":r.mirror.style.top=r.clientY-r.mirrorHeight-(o-i.bottom)+"px"));var c=V(r.mirror,r.clientX,r.clientY),u=K(c,r.clientX,r.clientY),s=u!==r.lastDropTarget;if(c!==r.lastElementBehindCursor&&(X(c,r.dragOverEvents.dragularenter,!!u),r.lastElementBehindCursor&&X(r.lastElementBehindCursor,r.dragOverEvents.dragularleave,c),r.lastElementBehindCursor=c),s&&(r.lastDropTarget&&n("out"),r.lastDropTarget=u,n("over")),u===r.source&&r.copy&&!pe(me.copySortSource))return void(C(r.item)&&r.item.parentNode.removeChild(r.item));var d,g=G(u,c);if(null!==g)d=Q(u,g,r.clientX,r.clientY);else{if(pe(me.revertOnSpill)!==!0||r.copy)return void(r.copy&&C(r.item)&&r.item.parentNode.removeChild(r.item));d=r.initialSibling,u=r.source}(null===d||d!==r.item&&d!==v(r.item)&&d!==r.currentSibling)&&(r.currentSibling=d,u.insertBefore(r.item,d),me.scope&&me.scope.$emit(me.eventNames.dragularshadow,r.item,u,e))}}function K(e,n,t){function o(){if(!Z(a))return!1;for(var o,c=G(a,e),u=Q(a,c,n,t),s=J(a,u),d=me.nameSpace.length;d--;)if(o=me.nameSpace[d],r.containers[o].indexOf(a)!==-1){l=i(o);break}return r.target=a,!!s||(l||(l=i("dragularCommon")),l&&B(l.o.containersModel)&&(l.m=ee(l.o)[_(l.o).indexOf(a)]),!(l&&l.o.accepts&&!l.o.accepts(r.item,a,r.source,u,r.sourceModel,r.initialIndex))&&(!(me.isContainer&&me.isContainerAccepts&&!me.isContainerAccepts(r.item,a,r.source,u,r.sourceModel,r.initialIndex))&&(!me.canBeAccepted||me.canBeAccepted(r.item,a,r.source,u,r.sourceModel,r.initialIndex))))}function i(e){return r.containersCtx[e][r.containers[e].indexOf(a)]}for(var a=e,l=null;a&&!o();)a=C(a);return l&&(r.targetCtx=l),a}function U(){M(r.item,me.classes.hide)}function q(){ye.dragging&&y(r.item,me.classes.hide)}function J(e,n){var t=void 0!==n?n:r.mirror?r.currentSibling:v(r.item);return e===r.source&&t===r.initialSibling}function G(e,n){for(var r=n;r!==e&&C(r)!==e;)r=C(r);return r===T?null:r}function Q(e,n,r,t){function o(){var n,o,i,a=e.children.length;for(n=0;n<a;n++){if(o=e.children[n],i=o.getBoundingClientRect(),l&&i.left>r)return o;if(!l&&i.top>t)return o}return null}function i(){var e=n.getBoundingClientRect();return a(l?r>e.left+g(e)/2:t>e.top+f(e)/2)}function a(e){return e?v(n):n}var l="horizontal"===me.direction;return n!==e?i():o()}function V(e,n,r){var t,o=e||{},i=o.className;return o.className+=" "+me.classes.hide,t=O.elementFromPoint(n,r),o.className=i,t}function Z(e){if(!e)return!1;for(var n=me.nameSpace.length;n--;)if(r.containers[me.nameSpace[n]].indexOf(e)!==-1)return!0;return me.isContainer(e)?(r.tempModel=me.isContainerModel(e),!0):(r.tempModel=null,!1)}function _(e){return ne("containers",e)}function ee(e){return ne("containersModel",e,!0)}function ne(e,n,t){return B(n[e])?o(n[e](n===me?ye:null,r),t,n.scope):n[e]}function re(e){if(ye.dragging){var n=arguments.length>0?e:pe(me.revertOnSpill),t=C(r.item),o=J(t);o||r.copy||!n||r.source.insertBefore(r.item,r.initialSibling),!r.sourceModel||r.copy||n?me.scope&&(o||n)&&me.scope.$emit(me.eventNames.dragularcancel,r.item,r.source,r.sourceModel,r.initialIndex):oe(r.item,t),(!r.sourceModel||r.copy||n||o)&&ae()}}function te(e){if(W(),ye.dragging){e.originalEvent&&(e=e.originalEvent),r.clientX=E("clientX",e),r.clientY=E("clientY",e);var n=V(r.mirror,r.clientX,r.clientY),t=K(n,r.clientX,r.clientY);t&&(r.copy&&pe(me.copySortSource)||!r.copy||t!==r.source)?oe(r.item,t):pe(me.removeOnSpill)?ie():re(),r.target=null,r.lastElementBehindCursor&&X(r.lastElementBehindCursor,r.dragOverEvents.dragularrelease,n),me.scope&&me.scope.$emit(me.eventNames.dragularrelease,r.item,r.source,e)}}function oe(t,o){function a(){if(_(me).forEach(function(e){i(e,"off","mousedown",A),i(e,"on","mousedown",A)}),me.compileItemOnDrop){var e=angular.element(o).scope?angular.element(o).scope():me.scope;e&&e.$applyAsync(function(){var i=n(r.copy?l.cloneNode(!0):l)(e);t.parentNode===o&&o.removeChild(t),o.insertBefore(i[0],c),ae()})}me.scope&&(J(o)?me.scope.$emit(me.eventNames.dragularcancel,t,r.source,r.sourceModel,r.initialIndex):me.scope.$emit(me.eventNames.dragulardrop,t,o,r.source,r.sourceModel,r.initialIndex,r.targetModel,u)),me.compileItemOnDrop||ae()}if(!t)return void ae();var l=r.sourceItem,c=r.currentSibling,u=I(t,o);r.copy&&o===r.source&&C(t)&&pe(me.copySortSource)&&t.parentNode.removeChild(r.sourceItem),r.sourceModel&&!J(o)?(r.targetCtx&&r.targetCtx.fm&&(u=r.targetCtx.m.indexOf(r.targetCtx.fm[u])),r.sourceFilteredModel&&(r.initialIndex=r.sourceModel.indexOf(r.sourceFilteredModel[r.initialIndex])),e.$applyAsync(function(){r.sourceModel&&(o===r.source?r.sourceModel.splice(u,0,r.sourceModel.splice(r.initialIndex,1)[0]):(r.dropElmModel=r.copy&&!me.dontCopyModel?angular.copy(r.sourceModel[r.initialIndex]):r.sourceModel[r.initialIndex],r.tempModel?r.targetModel=r.tempModel:r.targetModel=r.targetCtx&&r.targetCtx.m||r.sourceModel,t.parentNode.removeChild(t),r.copy||r.sourceModel.splice(r.initialIndex,1),r.targetModel&&r.targetModel.splice(u,0,r.dropElmModel)),C(t)&&t.parentNode.removeChild(t),a())})):a()}function ie(){if(ye.dragging){var n=C(r.item);n&&n.removeChild(r.item),r.sourceModel&&e.$applyAsync(function(){r.sourceModel.splice(r.initialIndex,1),ae()}),me.scope&&me.scope.$emit(r.copy?me.eventNames.dragularcancel:me.eventNames.dragularremove,r.item,n,r.sourceModel,r.initialIndex),r.sourceModel||ae()}}function ae(){W(),se(),r.item&&M(r.item,me.classes.transit),ye.dragging=!1,pe(me.removeOnSpill)===!0&&q(),me.scope&&(r.lastDropTarget&&me.scope.$emit(me.eventNames.dragularout,r.item,r.lastDropTarget,r.source),me.scope.$emit(me.eventNames.dragulardragend,r.item)),r.source=r.item=r.sourceItem=r.initialSibling=r.currentSibling=r.sourceModel=null,r.initialIndex=r.currentIndex=r.lastDropTarget=r.tempModel=r.targetModel=null,r.dropElmModel=r.targetCtx=r.copy=r.moveX=r.moveY=null}function le(){$(!0),ce(me.containers),te({})}function ce(n){e.$applyAsync(function(){var e=w(n)?n:c(n);e.forEach(function(e){angular.forEach(me.nameSpace,function(n){var t;t=r.containers[n].indexOf(e),r.containers[n].splice(t,1),r.containersCtx[n].splice(t,1)})})})}function ue(e){if(r.target){e.originalEvent&&(e=e.originalEvent);var n=r.target.scrollTop;r.target.scrollTop+=e.deltaY,n!==r.target.scrollTop&&(e.stopPropagation(),e.preventDefault())}}function se(){r.mirror&&(M(O.body,me.classes.unselectable),i(T,"off","mousemove",z),i(r.mirror,"off","wheel",ue),C(r.mirror)&&r.mirror.parentNode.removeChild(r.mirror),r.mirror=null)}function de(e){o(e,!0,me.scope)}var me,ge=t||[],fe=d||{},pe=Y,ve={mirror:"gu-mirror",hide:"gu-hide",unselectable:"gu-unselectable",transit:"gu-transit"},he={dragularenter:"dragularenter",dragularleave:"dragularleave",dragularrelease:"dragularrelease",dragularcloned:"dragularcloned",dragulardrag:"dragulardrag",dragularcancel:"dragularcancel",dragulardrop:"dragulardrop",dragularremove:"dragularremove",dragulardragend:"dragulardragend",dragularshadow:"dragularshadow",dragularover:"dragularover",dragularout:"dragularout"},xe={copyOptions:!1,classes:ve,eventNames:he,containers:!1,containersModel:!1,containersFilteredModel:!1,isContainer:a,isContainerModel:p,isContainerAccepts:l,moves:l,accepts:l,canBeAccepted:l,copy:!1,copySortSource:!1,dontCopyModel:!1,invalid:a,revertOnSpill:!1,removeOnSpill:!1,lockX:!1,lockY:!1,boundingBox:!1,mirrorContainer:O.body,ignoreInputTextSelection:!0,compileItemOnDrop:!1,onInit:!1},ye={containers:r.containers,containersCtx:r.containersCtx,sanitizeContainersModel:de,sanitizeContainers:o,isContainer:Z,start:P,end:R,cancel:re,remove:ie,destroy:le,dragging:!1};return x(),b(),N(),$(),me.onInit&&me.onInit(ye,me),ye}function o(e,n,r){if(B(e))return e;if(w(e))return n?w(e[0])?e:[e]:e;if("string"==typeof e&&r){var t=r.$eval(e);return B(t)?t:function(){return r.$eval(e)}}return e?c(e):[]}function i(e,n,r,t){var o={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},i={mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"},a={mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"},l=angular.element(e);if(e.addEventListener){var c={on:"addEventListener",off:"removeEventListener"};e[c[n]](r,t,{passive:!1}),e[c[n]](o[r],t,{passive:!1})}else"undefined"!=typeof navigator&&navigator.pointerEnabled&&i[r]?l[n](i[r],t):"undefined"!=typeof navigator&&navigator.msPointerEnabled&&a[r]?l[n](a[r],t):o[r]&&l[n](o[r],t),l[n](r,t)}function a(){return!1}function l(){return!0}function c(e,n){return w(e)?e:e.length?Array.prototype.slice.call(e,n):[e]}function u(e){if(e.touches)return e.touches.length;if(e.originalEvent&&e.originalEvent.touches)return e.originalEvent.touches.length;if(void 0!==e.which&&0!==e.which)return e.which;if(void 0!==e.buttons)return e.buttons;var n=e.button;return void 0!==n?1&n?1:2&n?3:4&n?2:0:void 0}function s(e){e.originalEvent&&(e=e.originalEvent),r.grabbed&&e.preventDefault()}function d(e,n){return"undefined"!=typeof window[n]?window[n]:T.clientHeight?T[e]:O.body[e]}function m(e){var n=e.getBoundingClientRect(),r=d("scrollTop","pageYOffset"),t=d("scrollLeft","pageXOffset");return{left:n.left+t,right:n.right+t,top:n.top+r,bottom:n.bottom+r}}function g(e){return e.width||e.right-e.left}function f(e){return e.height||e.bottom-e.top}function p(){return{}}function v(e){function n(){var n=e;do n=n.nextSibling;while(n&&1!==n.nodeType);return n}if(e)return e.nextElementSibling||n()}function h(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function x(e){var n=r.classesCache[e];return n?n.lastIndex=0:r.classesCache[e]=n=new RegExp("(?:^|\\s)"+e+"(?:\\s|$)","g"),n}function y(e,n){var r=e.className;r.length?x(n).test(r)||(e.className+=" "+n):e.className=n}function M(e,n){e.className=e.className.replace(x(n)," ").trim()}function b(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function E(e,n){var r=b(n),t={pageX:"clientX",pageY:"clientY"};return e in t&&!(e in r)&&t[e]in r&&(e=t[e]),!r.type||r.type.indexOf("touch")<0?r[e]:r.type.indexOf("end")===-1&&r.originalEvent.touches[0][e.replace("client","page")]}function C(e){return e.parentNode===document?null:e.parentNode}function S(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||N(e)}function N(e){return!!e&&("false"!==e.contentEditable&&("true"===e.contentEditable||N(C(e))))}function I(e,n){return Array.prototype.indexOf.call(angular.element(n).children(),e)}function X(e,n,t){e&&(r.extra=t,e.dispatchEvent?e.dispatchEvent(n):e.fireEvent("on"+n.eventType,n))}function Y(e,n,t){return B(e)?!!e.apply(t||this,n||r):!!e}var O=document,T=O.documentElement,w=Array.isArray,B=angular.isFunction;return t.cleanEnviroment=function(){r.classesCache={},r.containersCtx={},r.containers={},r.mirror=void 0},t.shared=r,t};t.$inject=["$rootScope","$compile"],e.exports=t}])});
//# sourceMappingURL=dragular.min.js.map
